inline __attribute__((always_inline)) float mymin(float a, float b) {
    return b < a ? b : a;
}

inline __attribute__((always_inline))float mymax(float a, float b) {
    return a < b ? b : a;
}

inline __attribute__((always_inline)) float median3x3(float* array)
{
    float tmp = mymin(array[1], array[2]);
    array[2] = mymax(array[1], array[2]);
    array[1] = tmp;
    tmp = mymin(array[4], array[5]);
    array[5] = mymax(array[4], array[5]);
    array[4] = tmp;
    tmp = mymin(array[7], array[8]);
    array[8] = mymax(array[7], array[8]);
    array[7] = tmp;
    tmp = mymin(array[0], array[1]);
    array[1] = mymax(array[0], array[1]);
    array[0] = tmp;
    tmp = mymin(array[3], array[4]);
    array[4] = mymax(array[3], array[4]);
    array[3] = tmp;
    tmp = mymin(array[6], array[7]);
    array[7] = mymax(array[6], array[7]);
    array[6] = tmp;
    tmp = mymin(array[1], array[2]);
    array[2] = mymax(array[1], array[2]);
    array[1] = tmp;
    tmp = mymin(array[4], array[5]);
    array[5] = mymax(array[4], array[5]);
    array[4] = tmp;
    tmp = mymin(array[7], array[8]);
    array[8] = mymax(array[7], array[8]);
    array[3] = mymax(array[0], array[3]);
    array[5] = mymin(array[5], array[8]);
    array[7] = mymax(array[4], tmp);
    tmp = mymin(array[4], tmp);
    array[6] = mymax(array[3], array[6]);
    array[4] = mymax(array[1], tmp);
    array[2] = mymin(array[2], array[5]);
    array[4] = mymin(array[4], array[7]);
    tmp = mymin(array[4], array[2]);
    array[2] = mymax(array[4], array[2]);
    array[4] = mymax(array[6], tmp);
    return mymin(array[4], array[2]);
}

inline __attribute__((always_inline)) float median5x5(float* array)
{
    float tmp = mymin(array[0], array[1]);
    array[1] = mymax(array[0], array[1]);
    array[0] = tmp;
    tmp = mymin(array[3], array[4]);
    array[4] = mymax(array[3], array[4]);
    array[3] = tmp;
    tmp = mymin(array[2], array[4]);
    array[4] = mymax(array[2], array[4]);
    array[2] = mymin(tmp, array[3]);
    array[3] = mymax(tmp, array[3]);
    tmp = mymin(array[6], array[7]);
    array[7] = mymax(array[6], array[7]);
    array[6] = tmp;
    tmp = mymin(array[5], array[7]);
    array[7] = mymax(array[5], array[7]);
    array[5] = mymin(tmp, array[6]);
    array[6] = mymax(tmp, array[6]);
    tmp = mymin(array[9], array[10]);
    array[10] = mymax(array[9], array[10]);
    array[9] = tmp;
    tmp = mymin(array[8], array[10]);
    array[10] = mymax(array[8], array[10]);
    array[8] = mymin(tmp, array[9]);
    array[9] = mymax(tmp, array[9]);
    tmp = mymin(array[12], array[13]);
    array[13] = mymax(array[12], array[13]);
    array[12] = tmp;
    tmp = mymin(array[11], array[13]);
    array[13] = mymax(array[11], array[13]);
    array[11] = mymin(tmp, array[12]);
    array[12] = mymax(tmp, array[12]);
    tmp = mymin(array[15], array[16]);
    array[16] = mymax(array[15], array[16]);
    array[15] = tmp;
    tmp = mymin(array[14], array[16]);
    array[16] = mymax(array[14], array[16]);
    array[14] = mymin(tmp, array[15]);
    array[15] = mymax(tmp, array[15]);
    tmp = mymin(array[18], array[19]);
    array[19] = mymax(array[18], array[19]);
    array[18] = tmp;
    tmp = mymin(array[17], array[19]);
    array[19] = mymax(array[17], array[19]);
    array[17] = mymin(tmp, array[18]);
    array[18] = mymax(tmp, array[18]);
    tmp = mymin(array[21], array[22]);
    array[22] = mymax(array[21], array[22]);
    array[21] = tmp;
    tmp = mymin(array[20], array[22]);
    array[22] = mymax(array[20], array[22]);
    array[20] = mymin(tmp, array[21]);
    array[21] = mymax(tmp, array[21]);
    tmp = mymin(array[23], array[24]);
    array[24] = mymax(array[23], array[24]);
    array[23] = tmp;
    tmp = mymin(array[2], array[5]);
    array[5] = mymax(array[2], array[5]);
    array[2] = tmp;
    tmp = mymin(array[3], array[6]);
    array[6] = mymax(array[3], array[6]);
    array[3] = tmp;
    tmp = mymin(array[0], array[6]);
    array[6] = mymax(array[0], array[6]);
    array[0] = mymin(tmp, array[3]);
    array[3] = mymax(tmp, array[3]);
    tmp = mymin(array[4], array[7]);
    array[7] = mymax(array[4], array[7]);
    array[4] = tmp;
    tmp = mymin(array[1], array[7]);
    array[7] = mymax(array[1], array[7]);
    array[1] = mymin(tmp, array[4]);
    array[4] = mymax(tmp, array[4]);
    tmp = mymin(array[11], array[14]);
    array[14] = mymax(array[11], array[14]);
    array[11] = tmp;
    tmp = mymin(array[8], array[14]);
    array[14] = mymax(array[8], array[14]);
    array[8] = mymin(tmp, array[11]);
    array[11] = mymax(tmp, array[11]);
    tmp = mymin(array[12], array[15]);
    array[15] = mymax(array[12], array[15]);
    array[12] = tmp;
    tmp = mymin(array[9], array[15]);
    array[15] = mymax(array[9], array[15]);
    array[9] = mymin(tmp, array[12]);
    array[12] = mymax(tmp, array[12]);
    tmp = mymin(array[13], array[16]);
    array[16] = mymax(array[13], array[16]);
    array[13] = tmp;
    tmp = mymin(array[10], array[16]);
    array[16] = mymax(array[10], array[16]);
    array[10] = mymin(tmp, array[13]);
    array[13] = mymax(tmp, array[13]);
    tmp = mymin(array[20], array[23]);
    array[23] = mymax(array[20], array[23]);
    array[20] = tmp;
    tmp = mymin(array[17], array[23]);
    array[23] = mymax(array[17], array[23]);
    array[17] = mymin(tmp, array[20]);
    array[20] = mymax(tmp, array[20]);
    tmp = mymin(array[21], array[24]);
    array[24] = mymax(array[21], array[24]);
    array[21] = tmp;
    tmp = mymin(array[18], array[24]);
    array[24] = mymax(array[18], array[24]);
    array[18] = mymin(tmp, array[21]);
    array[21] = mymax(tmp, array[21]);
    tmp = mymin(array[19], array[22]);
    array[22] = mymax(array[19], array[22]);
    array[19] = tmp;
    array[17] = mymax(array[8], array[17]);
    tmp = mymin(array[9], array[18]);
    array[18] = mymax(array[9], array[18]);
    array[9] = tmp;
    tmp = mymin(array[0], array[18]);
    array[18] = mymax(array[0], array[18]);
    array[9] = mymax(tmp, array[9]);
    tmp = mymin(array[10], array[19]);
    array[19] = mymax(array[10], array[19]);
    array[10] = tmp;
    tmp = mymin(array[1], array[19]);
    array[19] = mymax(array[1], array[19]);
    array[1] = mymin(tmp, array[10]);
    array[10] = mymax(tmp, array[10]);
    tmp = mymin(array[11], array[20]);
    array[20] = mymax(array[11], array[20]);
    array[11] = tmp;
    tmp = mymin(array[2], array[20]);
    array[20] = mymax(array[2], array[20]);
    array[11] = mymax(tmp, array[11]);
    tmp = mymin(array[12], array[21]);
    array[21] = mymax(array[12], array[21]);
    array[12] = tmp;
    tmp = mymin(array[3], array[21]);
    array[21] = mymax(array[3], array[21]);
    array[3] = mymin(tmp, array[12]);
    array[12] = mymax(tmp, array[12]);
    tmp = mymin(array[13], array[22]);
    array[22] = mymax(array[13], array[22]);
    array[4] = mymin(array[4], array[22]);
    array[13] = mymax(array[4], tmp);
    tmp = mymin(array[4], tmp);
    array[4] = tmp;
    tmp = mymin(array[14], array[23]);
    array[23] = mymax(array[14], array[23]);
    array[14] = tmp;
    tmp = mymin(array[5], array[23]);
    array[23] = mymax(array[5], array[23]);
    array[5] = mymin(tmp, array[14]);
    array[14] = mymax(tmp, array[14]);
    tmp = mymin(array[15], array[24]);
    array[24] = mymax(array[15], array[24]);
    array[15] = tmp;
    array[6] = mymin(array[6], array[24]);
    tmp = mymin(array[6], array[15]);
    array[15] = mymax(array[6], array[15]);
    array[6] = tmp;
    tmp = mymin(array[7], array[16]);
    array[7] = mymin(tmp, array[19]);
    tmp = mymin(array[13], array[21]);
    array[15] = mymin(array[15], array[23]);
    tmp = mymin(array[7], tmp);
    array[7] = mymin(tmp, array[15]);
    array[9] = mymax(array[1], array[9]);
    array[11] = mymax(array[3], array[11]);
    array[17] = mymax(array[5], array[17]);
    array[17] = mymax(array[11], array[17]);
    array[17] = mymax(array[9], array[17]);
    tmp = mymin(array[4], array[10]);
    array[10] = mymax(array[4], array[10]);
    array[4] = tmp;
    tmp = mymin(array[6], array[12]);
    array[12] = mymax(array[6], array[12]);
    array[6] = tmp;
    tmp = mymin(array[7], array[14]);
    array[14] = mymax(array[7], array[14]);
    array[7] = tmp;
    tmp = mymin(array[4], array[6]);
    array[6] = mymax(array[4], array[6]);
    array[7] = mymax(tmp, array[7]);
    tmp = mymin(array[12], array[14]);
    array[14] = mymax(array[12], array[14]);
    array[12] = tmp;
    array[10] = mymin(array[10], array[14]);
    tmp = mymin(array[6], array[7]);
    array[7] = mymax(array[6], array[7]);
    array[6] = tmp;
    tmp = mymin(array[10], array[12]);
    array[12] = mymax(array[10], array[12]);
    array[10] = mymax(array[6], tmp);
    tmp = mymin(array[6], tmp);
    array[17] = mymax(tmp, array[17]);
    tmp = mymin(array[12], array[17]);
    array[17] = mymax(array[12], array[17]);
    array[12] = tmp;
    array[7] = mymin(array[7], array[17]);
    tmp = mymin(array[7], array[10]);
    array[10] = mymax(array[7], array[10]);
    array[7] = tmp;
    tmp = mymin(array[12], array[18]);
    array[18] = mymax(array[12], array[18]);
    array[12] = mymax(array[7], tmp);
    array[10] = mymin(array[10], array[18]);
    tmp = mymin(array[12], array[20]);
    array[20] = mymax(array[12], array[20]);
    array[12] = tmp;
    tmp = mymin(array[10], array[20]);
    return mymax(tmp, array[12]);
}
